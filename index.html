<!doctype html>

<html lang="tr">

<head>

<meta charset="utf-8" />

<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>Kore SavaÅŸÄ± â€” TÃ¼rk Askeri</title>

<style>

:root{--bg:#07162b;--accent:#ffb74d;--muted:#bfbfbf}

html,body{height:100%;margin:0;overflow:hidden;background:var(--bg);color:#A020F0;font-family:monospace}

#startMenu{position:absolute;inset:0;z-index:60;display:flex;align-items:center;justify-content:center}

.menu-card{width:min(760px,94%);background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.08));border-radius:12px;padding:18px;box-shadow:0 12px 40px rgba(0,0,0,0.6);display:flex;gap:12px;align-items:center}

.menu-left{flex:1}

h1.title{margin:0;font-size:30px;color:var(--accent);text-shadow:0 6px 18px rgba(0,0,0,0.6)}

p.lead{color:var(--muted);margin-top:8px;line-height:1.4}

.controls{margin-top:12px;display:flex;gap:10px}

.btn{background:var(--accent);color:#111;border:none;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}

.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff}

.preview{width:220px;height:140px;border-radius:8px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:transparent}

#info{position:absolute;top:10px;width:100%;text-align:center;color:#eee;font-size:15px;z-index:50;text-shadow:1px 1px #000}

#gameOverScreen,#levelScreen{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:white;text-align:center;display:none;z-index:80}

/* Mobil kontrol butonlarÄ±nÄ±n konum ve dÃ¼zeni gÃ¼ncellendi */

#mobileControls{

    /* BAÅžLANGIÃ‡TA GÄ°ZLÄ° OLMASI Ä°Ã‡Ä°N SADECE `display: none;` KULLANILDI */

    display:none;

    position:absolute;

    bottom:18px;

    left:50%;

    transform:translateX(-50%);

    display:grid; /* Grid yapÄ±sÄ±na geÃ§ildi (JS ile gÃ¶sterildiÄŸinde kullanÄ±lacak) */

    grid-template-areas:

        ". up ."

        "left fire right"

        ". down .";

    gap:10px;

    z-index:40;

}

#upBtn{grid-area: up;}

#downBtn{grid-area: down;}

#leftBtn{grid-area: left;}

#rightBtn{grid-area: right;}

#fireBtn{grid-area: fire;}



.ctrlBtn{width:72px;height:72px;border-radius:50%;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.08);display:inline-flex;align-items:center;justify-content:center;font-size:28px;color:#fff}

#soundBtn{position:absolute;top:12px;right:12px;z-index:90;padding:8px 12px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.3);cursor:pointer}

#gameCanvas{display:block;position:fixed;inset:0;width:100%;height:100%;image-rendering:pixelated;z-index:10}

.footer-note{position:absolute;left:12px;bottom:12px;color:var(--muted);z-index:70;font-size:12px}

@media (max-width:820px){ .menu-card{flex-direction:column;align-items:stretch} .preview{width:100%;height:120px} h1.title{font-size:22px} }

</style>

</head>

<body>

  <div id="startMenu">

    <div class="menu-card">

      <div class="menu-left">

        <h1 class="title">Kore SavaÅŸÄ±nda bir TÃœRK askerisin</h1>

        <p class="lead">GÃ¶revin: DÃ¼ÅŸman hatlarÄ±nÄ± yarÄ±p birliklerini korumak. Hareket: W/A/S/D veya ok tuÅŸlarÄ±. AteÅŸ: SPACE. Mobil iÃ§in "Mobile ile Oyna" butonuna bas.</p>

        <div class="controls">

          <button class="btn" id="startBtn">PC ile Oyna</button>

          <button class="btn" id="mobileBtn">Mobile ile Oyna</button>

          <button class="btn ghost" id="howBtn">NasÄ±l OynanÄ±r</button>

        </div>

      </div>

      <div>

        <div class="preview"><canvas id="previewCanvas" width="220" height="140" style="width:100%;height:100%;display:block"></canvas></div>

        <div style="margin-top:8px;color:var(--muted);font-size:13px">Åžehitlerimizi Ve Gazilerimizi SaygÄ± ile AnÄ±yoruz... </div>

      </div>

    </div>

  </div>



  <div id="info">Kore SavaÅŸÄ± â€” TÃ¼rk Askeri</div>

  <div id="levelScreen"></div>

  <div id="gameOverScreen"><h1>OYUN BÄ°TTÄ°</h1><p id="finalScore"></p><button onclick="restartGame()">Yeniden Oyna</button></div>



  <button id="soundBtn">Ses: AÃ§</button>



  <div id="mobileControls">

    <button class="ctrlBtn" id="upBtn">â–²</button>

    <button class="ctrlBtn" id="leftBtn">â—€</button>

    <button class="ctrlBtn" id="fireBtn">ðŸ”¥</button>

    <button class="ctrlBtn" id="rightBtn">â–¶</button>

    <button class="ctrlBtn" id="downBtn">â–¼</button>

  </div>

  <canvas id="gameCanvas"></canvas>

  <div class="footer-note">Kore SavaÅŸÄ± â€” TÃ¼rk Askeri</div>



<script>
/* ---------- setup ---------- */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const preview = document.getElementById('previewCanvas');
const pctx = preview.getContext('2d');
canvas.width = innerWidth; canvas.height = innerHeight;

let keys = {};
addEventListener('keydown', e=>keys[e.key.toLowerCase()]=true);
addEventListener('keyup', e=>keys[e.key.toLowerCase()]=false);

/* game state */
let player, bullets=[], enemies=[], enemyBullets=[], explosions=[];
let healthPacks = []; // YENÄ°: Can paketleri dizisi
let score=0, gameOver=false;
let stars=[], clouds=[], bgX=0, screenMiddle = canvas.width/2;
let spawnInterval = null, enemyBulletIntervalRef = null;
let mobileMode=false;

/* ---------- SPRITE SETUP (unchanged) ---------- */
const spriteImg = new Image();
spriteImg.crossOrigin = 'anonymous';
spriteImg.src = 'https://opengameart.org/sites/default/files/soldier_sheet.png';

const FRAME_W = 64;
const FRAME_H = 64;
const SPRITE_SCALE = 0.8; // draw bigger than original
const ANIM_FPS = 10;
const ANIM_TICKS = 1000 / ANIM_FPS;

const animations = {
Â  idle: { row: 0, frames: 6 },
Â  run:Â  { row: 1, frames: 6 },
Â  shoot:{ row: 2, frames: 6 },
Â  dead: { row: 3, frames: 6 }
};

/* ---------- AUDIO (WebAudio simple effects) ---------- */
let audioCtx = null;
let masterGain = null;
let soundOn = true;
function ensureAudio(){
Â  if(!audioCtx){
Â  Â  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
Â  Â  masterGain = audioCtx.createGain();
Â  Â  masterGain.gain.value = 0.9;
Â  Â  masterGain.connect(audioCtx.destination);
Â  }
}
function playShootSound(){
Â  if(!soundOn) return;
Â  ensureAudio();
Â  const t = audioCtx.currentTime;
Â  const o = audioCtx.createOscillator(); o.type='square'; o.frequency.setValueAtTime(900, t);
Â  const g = audioCtx.createGain(); g.gain.setValueAtTime(0.0001, t); g.gain.linearRampToValueAtTime(0.25, t+0.01); g.gain.exponentialRampToValueAtTime(0.0001, t+0.2);
Â  o.connect(g); g.connect(masterGain); o.start(t); o.stop(t+0.21);
}
function playEnemyShootSound(){
Â  if(!soundOn) return;
Â  ensureAudio();
Â  const t = audioCtx.currentTime;
Â  const o = audioCtx.createOscillator(); o.type='sine'; o.frequency.setValueAtTime(420, t);
Â  const g = audioCtx.createGain(); g.gain.setValueAtTime(0.0001,t); g.gain.linearRampToValueAtTime(0.15,t+0.01); g.gain.exponentialRampToValueAtTime(0.0001,t+0.3);
Â  o.connect(g); g.connect(masterGain); o.start(t); o.stop(t+0.32);
}
function playHitSound(){
Â  if(!soundOn) return;
Â  ensureAudio();
Â  const t = audioCtx.currentTime;
Â  const o = audioCtx.createOscillator(); o.type='triangle'; o.frequency.setValueAtTime(160, t);
Â  const g = audioCtx.createGain(); g.gain.setValueAtTime(0.0001,t); g.gain.linearRampToValueAtTime(0.5,t+0.01); g.gain.exponentialRampToValueAtTime(0.0001,t+0.25);
Â  o.connect(g); g.connect(masterGain); o.start(t); o.stop(t+0.26);
}
function playExplosionSound(){
Â  if(!soundOn) return;
Â  ensureAudio();
Â  const t = audioCtx.currentTime;
Â  // short noise-ish burst via multiple oscillators
Â  for(let i=0;i<3;i++){
Â  Â  const o = audioCtx.createOscillator(); o.type='sawtooth'; o.frequency.setValueAtTime(120 + i*40, t);
Â  Â  const g = audioCtx.createGain(); g.gain.setValueAtTime(0.0001,t); g.gain.linearRampToValueAtTime(0.25,t+0.01); g.gain.exponentialRampToValueAtTime(0.0001,t+0.5);
Â  Â  o.connect(g); g.connect(masterGain); o.start(t); o.stop(t+0.5);
Â  }
}

/* ---------- preview animation ---------- */
function initPreview(){
Â  pctx.clearRect(0,0,preview.width,preview.height);
Â  for(let i=0;i<40;i++){
Â  Â  pctx.fillStyle = ['#ffb74d','#ff8a65','#81d4fa'][i%3];
Â  Â  pctx.beginPath(); pctx.arc(Math.random()*preview.width, Math.random()*preview.height, 2+Math.random()*3, 0, Math.PI*2); pctx.fill();
Â  }
}
initPreview();

/* ---------- engine helpers ---------- */
function drawSky(){
Â  const g = ctx.createLinearGradient(0,0,0,canvas.height);
Â  g.addColorStop(0,'#01203a'); g.addColorStop(0.5,'#063049'); g.addColorStop(1,'#071326');
Â  ctx.fillStyle = g; ctx.fillRect(0,0,canvas.width,canvas.height);
Â  stars.forEach(s=>{
Â  Â  const x = (s.x - bgX * s.speed*0.02 + canvas.width) % canvas.width;
Â  Â  ctx.fillStyle='#fff'; ctx.globalAlpha = 0.6; ctx.fillRect(x, s.y, s.s, s.s); ctx.globalAlpha = 1;
Â  });
Â  clouds.forEach(c=>{
Â  Â  c.x -= c.speed;
Â  Â  if(c.x + c.w < -50) c.x = canvas.width + 50;
Â  Â  ctx.fillStyle = 'rgba(255,255,255,0.12)';
Â  Â  ctx.beginPath(); ctx.ellipse(c.x, c.y, c.w, c.h, 0, 0, Math.PI*2); ctx.fill();
Â  });
Â  bgX += 1.2;
}

/* ---------- Entities ---------- */
function initEntities(){
Â  player = {
Â  Â  x:50, y:canvas.height/2 - 32,
Â  Â  w: FRAME_W * SPRITE_SCALE, h: FRAME_H * SPRITE_SCALE,
Â  Â  speed:5, lives:3,
Â  Â  anim: 'idle', frame:0, timer:0
Â  };
Â  bullets = []; enemies = []; enemyBullets = []; explosions = [];
Â  healthPacks = []; // YENÄ°: BaÅŸlangÄ±Ã§ta can paketlerini temizle
Â  score=0; gameOver=false;
Â  stars=[]; clouds=[];
Â  for(let i=0;i<120;i++) stars.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, s:Math.random()*2+0.6, speed:0.2+Math.random()*1.2});
Â  for(let i=0;i<28;i++) clouds.push({x:Math.random()*canvas.width, y:50+Math.random()*130, w:100+Math.random()*200, h:25+Math.random()*30, speed:0.2+Math.random()*0.6});
Â  if(spawnInterval) clearInterval(spawnInterval);
Â  spawnInterval = setInterval(()=>{ if(!gameOver) spawnEnemy(); }, 900);
}

/* spawn enemy */
function spawnEnemy(){
Â  const size = 28 + Math.floor(Math.random()*20);
Â  enemies.push({ x: canvas.width, y: Math.random()*(canvas.height-size), w:size, h:size, speed:2+Math.random()*2, hp:1, color:'#ff6b6b', shootCooldown: 80 + Math.floor(Math.random()*120) });
}

/* enemy shoots */
function enemyShoot(en){
Â  if(!en) return;
Â  enemyBullets.push({ x: en.x, y: en.y + en.h/2 - 3, w:8, h:6, speed: -8, color:'#f90', from: en });
Â  playEnemyShootSound();
}

/* bullets (player) */
function shoot(){
Â  if(!player || gameOver) return;
Â  player.anim = 'shoot'; player.frame = 0; player.timer = 0;
Â  bullets.push({ x: player.x + player.w - 6, y: player.y + player.h/2 - 4, w:10, h:6, speed:14, color:'#fff' });
Â  playShootSound();
}

/* simple explosion (circle) */
function createExplosion(x,y){
Â  explosions.push({ x,y, r:0, max:28, t:0 });
Â  playExplosionSound();
}

// YENÄ° FONKSÄ°YON: Can Paketi OluÅŸturma
function createHealthPack(x, y) {
Â  Â  healthPacks.push({
Â  Â  Â  Â  x: x,
Â  Â  Â  Â  y: y,
Â  Â  Â  Â  w: 20,
Â  Â  Â  Â  h: 20,
Â  Â  Â  Â  speed: 1.5,
Â  Â  Â  Â  color: '#4CAF50', // YeÅŸil
Â  Â  Â  Â  glow: 'rgba(76, 175, 80, 0.4)'
Â  Â  });
}

/* collision helper */
function overlap(a,b){ return a.x < b.x + b.w && a.x + a.w > b.x && a.y < b.y + b.h && a.y + a.h > b.y; }

/* ---------- sprite update/draw ---------- */
function updatePlayerSprite(dt){
Â  player.timer += dt;
Â  if(player.timer >= ANIM_TICKS){
Â  Â  player.timer = 0;
Â  Â  player.frame++;
Â  Â  const anim = animations[player.anim];
Â  Â  if(player.frame >= anim.frames){
Â  Â  Â  if(player.anim === 'shoot'){ player.anim = 'idle'; player.frame = 0; }
Â  Â  Â  else if(player.anim === 'dead'){ player.frame = anim.frames - 1; }
Â  Â  Â  else player.frame = 0;
Â  Â  }
Â  }
}
function drawPlayerSprite(){
Â  if(spriteImg.complete && spriteImg.naturalWidth){
Â  Â  const anim = animations[player.anim];
Â  Â  const sx = player.frame * FRAME_W;
Â  Â  const sy = anim.row * FRAME_H;
Â  Â  ctx.drawImage(spriteImg, sx, sy, FRAME_W, FRAME_H, player.x, player.y, player.w, player.h);
Â  } else {
Â  Â  ctx.fillStyle = '#00c3ff'; ctx.fillRect(player.x, player.y, player.w, player.h);
Â  }
}

/* ---------- main loop ---------- */
let lastTS = 0;
let running = false;

function loop(timestamp){
Â  if(!running) return;
Â  const dt = timestamp - lastTS || 16;
Â  lastTS = timestamp;

Â  drawSky();

Â  // input movement
Â  if(keys['arrowup']||keys['w']) { player.y = Math.max(0, player.y - player.speed); player.anim = 'run'; }
Â  else if(keys['arrowdown']||keys['s']) { player.y = Math.min(canvas.height - player.h, player.y + player.speed); player.anim = 'run'; }
Â  else if(keys['arrowleft']||keys['a']) { player.x = Math.max(0, player.x - player.speed); player.anim = 'run'; }
Â  else if(keys['arrowright']||keys['d']) { player.x = Math.min(screenMiddle - player.w, player.x + player.speed); player.anim = 'run'; }
Â  else { if(player.anim !== 'shoot' && player.anim !== 'dead') player.anim = 'idle'; }

Â  // MOBÄ°L KONTROLLER GÃœNCELLENDÄ°
Â  if(mobileMode){
Â  Â  if(window._mobileUp) { player.y = Math.max(0, player.y - player.speed); player.anim='run'; }
Â  Â  if(window._mobileDown) { player.y = Math.min(canvas.height - player.h, player.y + player.speed); player.anim='run'; }
Â  Â  if(window._mobileLeft) { player.x = Math.max(0, player.x - player.speed); player.anim='run'; }
Â  Â  if(window._mobileRight) { player.x = Math.min(screenMiddle - player.w, player.x + player.speed); player.anim='run'; }
Â  }
Â  // GÃœNCELLEME SONU

Â  // update bullets
Â  bullets.forEach((b,i)=>{ b.x += b.speed; if(b.x > canvas.width) bullets.splice(i,1); });

Â  // enemies: move, shoot, check hit by player bullets
Â  enemies.forEach((en, ei)=>{
Â  Â  en.x -= en.speed;
Â  Â  // shoot cooldown
Â  Â  en.shootCooldown--;
Â  Â  if(en.shootCooldown <= 0){
Â  Â  Â  enemyShoot(en);
Â  Â  Â  en.shootCooldown = 60 + Math.floor(Math.random()*120);
Â  Â  }
Â  Â  // bullet collision
Â  Â  bullets.forEach((b, bi)=>{
Â  Â  Â  if(overlap(b,en)){
Â  Â  Â  Â  bullets.splice(bi,1);
Â  Â  Â  Â  en.hp--;
Â  Â  Â  Â  createExplosion(en.x + en.w/2, en.y + en.h/2);
Â  Â  Â  Â  playHitSound();
Â  Â  Â  Â  if(en.hp <= 0){
Â  Â  Â  Â  Â  enemies.splice(ei,1);
Â  Â  Â  Â  Â  score += 1;
Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  // YENÄ°: %10 ÅŸansla Can Paketi dÃ¼ÅŸÃ¼r
Â  Â  Â  Â  Â  if(Math.random() < 0.1){ 
Â  Â  Â  Â  Â  Â  Â  createHealthPack(en.x + en.w/2, en.y + en.h/2);
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  });
Â  Â  // remove if offscreen
Â  Â  if(en.x + en.w < -50) enemies.splice(ei,1);
Â  });

Â  // enemy bullets: move toward left (negative speed), check hit player
Â  enemyBullets.forEach((eb, i)=>{
Â  Â  eb.x += eb.speed; // speed negative
Â  Â  if(eb.x + eb.w < 0) { enemyBullets.splice(i,1); return; }
Â  Â  if(overlap(eb, player)){
Â  Â  Â  enemyBullets.splice(i,1);
Â  Â  Â  player.lives = Math.max(0, player.lives - 1);
Â  Â  Â  createExplosion(player.x + player.w/2, player.y + player.h/2);
Â  Â  Â  playHitSound();
Â  Â  Â  // if dead
Â  Â  Â  if(player.lives <= 0){
Â  Â  Â  Â  player.anim = 'dead';
Â  Â  Â  Â  gameOver = true;
Â  Â  Â  Â  running = false;
Â  Â  Â  Â  document.getElementById('finalScore').innerText = 'Toplam Puan: ' + score;
Â  Â  Â  Â  document.getElementById('gameOverScreen').style.display = 'block';
Â  Â  Â  }
Â  Â  }
Â  });
Â  
Â  // YENÄ°: Health packs: hareket, oyuncuyla Ã§arpÄ±ÅŸma kontrolÃ¼ ve toplama
Â  healthPacks.forEach((hp, hpi) => {
Â  Â  Â  hp.x -= hp.speed;
Â  Â  Â  // Ekran dÄ±ÅŸÄ±na Ã§Ä±karsa kaldÄ±r
Â  Â  Â  if(hp.x + hp.w < 0) { healthPacks.splice(hpi, 1); return; }

Â  Â  Â  // Oyuncuyla Ã§arpÄ±ÅŸma (Can Toplama)
Â  Â  Â  if(overlap(hp, player)){
Â  Â  Â  Â  Â  healthPacks.splice(hpi, 1);
Â  Â  Â  Â  Â  player.lives = Math.min(3, player.lives + 1); // CanÄ± en fazla 3'te tut
Â  Â  Â  Â  Â  playShootSound(); // Can toplama sesi olarak mermi sesini kullandÄ±k
Â  Â  Â  }
Â  });


Â  // update explosions (simple expand)
Â  explosions.forEach((ex, idx)=>{
Â  Â  ex.t += dt;
Â  Â  ex.r = Math.min(ex.max, ex.r + dt*0.05);
Â  Â  // draw simple explosion circle fade
Â  Â  ctx.beginPath(); ctx.fillStyle = `rgba(255,180,60,${1 - ex.r/ex.max})`; ctx.arc(ex.x, ex.y, ex.r, 0, Math.PI*2); ctx.fill();
Â  Â  if(ex.r >= ex.max) explosions.splice(idx,1);
Â  });

Â  // player sprite update & draw
Â  updatePlayerSprite(dt);
Â  drawPlayerSprite();

Â  // draw bullets/enemies/enemy bullets/HUD
Â  bullets.forEach(b=>{ ctx.fillStyle=b.color; ctx.fillRect(b.x,b.y,b.w,b.h); });
Â  enemies.forEach(e=>{ ctx.fillStyle = e.color; ctx.fillRect(e.x,e.y,e.w,e.h); });
Â  enemyBullets.forEach(eb=>{ ctx.fillStyle = eb.color; ctx.fillRect(eb.x, eb.y, eb.w, eb.h); });
Â  
Â  // YENÄ°: Can Paketlerini Ã‡iz
Â  healthPacks.forEach(hp => {
Â  Â  Â  // Basit bir parlama efekti iÃ§in
Â  Â  Â  ctx.fillStyle = hp.glow;
Â  Â  Â  ctx.beginPath(); ctx.arc(hp.x + hp.w/2, hp.y + hp.h/2, hp.w/2 + 5, 0, Math.PI * 2); ctx.fill();

Â  Â  Â  // Can Paketi (YeÅŸil kare)
Â  Â  Â  ctx.fillStyle = hp.color;
Â  Â  Â  ctx.fillRect(hp.x, hp.y, hp.w, hp.h);
Â  Â  Â  
Â  Â  Â  // OrtasÄ±na "+" iÅŸareti
Â  Â  Â  ctx.fillStyle = '#fff';
Â  Â  Â  ctx.fillRect(hp.x + hp.w/2 - 2, hp.y + 4, 4, hp.h - 8);
Â  Â  Â  ctx.fillRect(hp.x + 4, hp.y + hp.h/2 - 2, hp.w - 8, 4);
Â  });


Â  // HUD
Â  ctx.fillStyle='#fff'; ctx.font='18px monospace'; ctx.fillText(`Puan: ${score}`, 18, 28);
Â  ctx.fillText(`Can: ${player.lives}`, 18, 52);

Â  requestAnimationFrame(loop);
}

/* ---------- Start / controls ---------- */
function startPC(){
Â  document.getElementById('startMenu').style.display='none';
Â  // PC modunda mobil kontrolleri gizle (EKLEME)
Â  document.getElementById('mobileControls').style.display='none';Â 
Â  mobileMode = false;
Â  screenMiddle = canvas.width/2;
Â  initEntities();
Â  lastTS = performance.now();
Â  running = true;
Â  requestAnimationFrame(loop);
}
function startMobile(){
Â  document.getElementById('startMenu').style.display='none';
Â  // Mobil modda mobil kontrolleri gÃ¶ster
Â  document.getElementById('mobileControls').style.display='grid';Â 
Â  mobileMode = true;
Â  screenMiddle = canvas.width/2;
Â  initEntities();
Â  lastTS = performance.now();
Â  running = true;
Â  requestAnimationFrame(loop);
}

document.getElementById('startBtn').addEventListener('click', ()=>{
Â  ensureAudio(); startPC();
});
document.getElementById('mobileBtn').addEventListener('click', ()=>{
Â  ensureAudio(); startMobile();
});
document.getElementById('howBtn').addEventListener('click', ()=>alert('Hareket: W/A/S/D veya ok tuÅŸlarÄ±. SPACE: AteÅŸ. Mobile: on-screen butonlar.'));
document.getElementById('soundBtn').addEventListener('click', ()=>{
Â  soundOn = !soundOn;
Â  document.getElementById('soundBtn').innerText = soundOn ? 'Ses: AÃ§' : 'Ses: KapalÄ±';
Â  if(masterGain) masterGain.gain.value = soundOn ? 0.9 : 0;
});

/* mobile button bindings (touch & mouse) - BURASI GÃœNCELLENDÄ° */
const upBtn = document.getElementById('upBtn'), downBtn = document.getElementById('downBtn');
const leftBtn = document.getElementById('leftBtn'), rightBtn = document.getElementById('rightBtn'), fireBtn = document.getElementById('fireBtn');

// UP / YUKARI
upBtn.addEventListener('touchstart', ()=>{ window._mobileUp = true; }, {passive:true});
upBtn.addEventListener('touchend', ()=>{ window._mobileUp = false; }, {passive:true});
upBtn.addEventListener('mousedown', ()=>{ window._mobileUp = true; });
upBtn.addEventListener('mouseup', ()=>{ window._mobileUp = false; });

// DOWN / AÅžAÄžI
downBtn.addEventListener('touchstart', ()=>{ window._mobileDown = true; }, {passive:true});
downBtn.addEventListener('touchend', ()=>{ window._mobileDown = false; }, {passive:true});
downBtn.addEventListener('mousedown', ()=>{ window._mobileDown = true; });
downBtn.addEventListener('mouseup', ()=>{ window._mobileDown = false; });

// LEFT / SOL
leftBtn.addEventListener('touchstart', ()=>{ window._mobileLeft = true; }, {passive:true});
leftBtn.addEventListener('touchend', ()=>{ window._mobileLeft = false; }, {passive:true});
leftBtn.addEventListener('mousedown', ()=>{ window._mobileLeft = true; });
leftBtn.addEventListener('mouseup', ()=>{ window._mobileLeft = false; });

// RIGHT / SAÄž
rightBtn.addEventListener('touchstart', ()=>{ window._mobileRight = true; }, {passive:true});
rightBtn.addEventListener('touchend', ()=>{ window._mobileRight = false; }, {passive:true});
rightBtn.addEventListener('mousedown', ()=>{ window._mobileRight = true; });
rightBtn.addEventListener('mouseup', ()=>{ window._mobileRight = false; });

// FIRE / ATEÅž
fireBtn.addEventListener('click', ()=>{ if(mobileMode) shoot(); });
/* GÃœNCELLEME SONU */

/* keyboard fire */
addEventListener('keydown', e=>{ if(e.key === ' ') shoot(); });

/* restartGame */
function restartGame(){
Â  document.getElementById('gameOverScreen').style.display='none';
Â  // Mobil modda tekrar baÅŸlatÄ±rken kontrolleri tekrar gÃ¶ster (gerekliyse)
Â  if(mobileMode){
Â  Â  document.getElementById('mobileControls').style.display='grid';
Â  }
Â  initEntities();
Â  running = true;
Â  gameOver = false;
Â  lastTS = performance.now();
Â  requestAnimationFrame(loop);
}

/* resize */
addEventListener('resize', ()=>{ canvas.width = innerWidth; canvas.height = innerHeight; screenMiddle = canvas.width/2; });

</script>

</body>

</html>
